### **Grafana for DevOps Engineers**  
Grafana is an **open-source visualization and monitoring tool** used to create **interactive dashboards** for metrics, logs, and alerts. It integrates with **Prometheus, Loki, Elasticsearch, InfluxDB, and other data sources** to monitor applications, infrastructure, and CI/CD pipelines.

---

## **1. Installing Grafana (Ubuntu 20.04/22.04 & CentOS 7/8)**  

### **ğŸ“Œ Install Grafana on Ubuntu**
```sh
sudo apt update && sudo apt upgrade -y
wget -q -O - https://packages.grafana.com/gpg.key | sudo apt-key add -
echo "deb https://packages.grafana.com/oss/deb stable main" | sudo tee /etc/apt/sources.list.d/grafana.list
sudo apt update && sudo apt install grafana -y
```

### **ğŸ“Œ Install Grafana on CentOS / RHEL**
```sh
sudo yum install -y https://packages.grafana.com/oss/rpm/grafana-9.5.2-1.x86_64.rpm
```

### **ğŸ“Œ Start & Enable Grafana Service**
```sh
sudo systemctl start grafana-server
sudo systemctl enable grafana-server
sudo systemctl status grafana-server
```

### **ğŸ“Œ Access Grafana Web UI**  
ğŸ“Œ Open browser: `http://<server-ip>:3000`  
ğŸ”¹ **Default login:**  
  - Username: `admin`  
  - Password: `admin` (change it after the first login)  

---

## **2. Essential Grafana Commands for DevOps Engineers**  

### **ğŸ”¹ Managing Grafana Service**  
- `sudo systemctl start grafana-server` â€“ Start Grafana  
- `sudo systemctl stop grafana-server` â€“ Stop Grafana  
- `sudo systemctl restart grafana-server` â€“ Restart Grafana  
- `sudo systemctl status grafana-server` â€“ Check Grafana service status  
- `sudo systemctl enable grafana-server` â€“ Enable Grafana at boot  

### **ğŸ”¹ Grafana Logs & Debugging**  
- `sudo journalctl -u grafana-server -f` â€“ View real-time logs  
- `sudo tail -f /var/log/grafana/grafana.log` â€“ Check logs for issues  

---

## **3. Configuring Grafana**  

### **ğŸ“Œ Change Default Port (3000 â†’ 8080)**  
Edit the config file:  
```sh
sudo nano /etc/grafana/grafana.ini
```
Find `[server]` and update:  
```ini
http_port = 8080
```
Restart Grafana:  
```sh
sudo systemctl restart grafana-server
```

---

## **4. Adding a Data Source in Grafana**  

### **ğŸ“Œ Add Prometheus as a Data Source**  
1ï¸âƒ£ Go to **Grafana Web UI â†’ Settings â†’ Data Sources**  
2ï¸âƒ£ Click **Add Data Source**  
3ï¸âƒ£ Select **Prometheus** and enter:  
   - **URL:** `http://localhost:9090`  
   - **Save & Test**  

### **ğŸ“Œ Add MySQL as a Data Source**
1ï¸âƒ£ Install MySQL Plugin:  
```sh
grafana-cli plugins install grafana-mysql-datasource
```
2ï¸âƒ£ Restart Grafana:  
```sh
sudo systemctl restart grafana-server
```
3ï¸âƒ£ Add MySQL in **Data Sources** section with database credentials.

---

## **5. Creating Dashboards in Grafana**  

### **ğŸ“Œ Create a Dashboard with Prometheus Metrics**
1ï¸âƒ£ Go to **Grafana UI â†’ Create â†’ Dashboard**  
2ï¸âƒ£ Click **Add New Panel**  
3ï¸âƒ£ Select **Prometheus** as the data source  
4ï¸âƒ£ Use this PromQL query to monitor CPU usage:  
```promql
rate(node_cpu_seconds_total{mode="user"}[5m])
```
5ï¸âƒ£ Click **Apply** to save the panel.

---

## **6. Setting Up Alerts in Grafana**  

### **ğŸ“Œ Create an Alert Rule**
1ï¸âƒ£ Open a **Dashboard** â†’ Click on a **Panel**  
2ï¸âƒ£ Select **Alerting â†’ Create Alert Rule**  
3ï¸âƒ£ Define **Condition** (e.g., CPU > 80%)  
4ï¸âƒ£ Choose **Notification Channel** (Slack, Email, etc.)  
5ï¸âƒ£ Click **Save Alert Rule**  

### **ğŸ“Œ Add Slack as a Notification Channel**
1ï¸âƒ£ Go to **Grafana UI â†’ Alerting â†’ Notification Channels**  
2ï¸âƒ£ Click **Add Channel**  
3ï¸âƒ£ Select **Slack** and enter the **Webhook URL**  
4ï¸âƒ£ Click **Test & Save**  

---

## **7. Managing Grafana Plugins**  

### **ğŸ“Œ Install a Plugin**
```sh
grafana-cli plugins install <plugin-name>
```
Example:  
```sh
grafana-cli plugins install grafana-clock-panel
```
Restart Grafana:  
```sh
sudo systemctl restart grafana-server
```

### **ğŸ“Œ List Installed Plugins**
```sh
grafana-cli plugins ls
```

### **ğŸ“Œ Remove a Plugin**
```sh
grafana-cli plugins remove <plugin-name>
```

---

## **8. Grafana Backup & Restore**  

### **ğŸ“Œ Backup Grafana Data**
```sh
sudo tar -czf grafana-backup.tar.gz /var/lib/grafana /etc/grafana /var/log/grafana
```

### **ğŸ“Œ Restore Grafana Data**
```sh
sudo tar -xzf grafana-backup.tar.gz -C /
```
Restart Grafana:  
```sh
sudo systemctl restart grafana-server
```

---

## **9. Securing Grafana**  

### **ğŸ“Œ Change Admin Password**
```sh
grafana-cli admin reset-admin-password NEW_PASSWORD
```

### **ğŸ“Œ Enable HTTPS**
Edit `/etc/grafana/grafana.ini` and set:
```ini
protocol = https
cert_file = /etc/grafana/ssl/grafana.crt
cert_key = /etc/grafana/ssl/grafana.key
```
Restart Grafana:  
```sh
sudo systemctl restart grafana-server
```

---

## **10. Best Practices for DevOps Engineers Using Grafana**  
âœ” **Use Dashboards for CI/CD Monitoring** â€“ Track Jenkins, Kubernetes, AWS, etc.  
âœ” **Set Up Alerts** â€“ Slack, Email, PagerDuty for quick notifications.  
âœ” **Integrate with Logging Tools** â€“ Loki, Elasticsearch for centralized logging.  
âœ” **Use Authentication & Role-Based Access Control (RBAC)**.  
âœ” **Optimize Query Performance** â€“ Avoid heavy queries for better performance.  

---

### **Summary**  
âœ… **Installation** â€“ Step-by-step guide for Ubuntu & CentOS.  
âœ… **Essential Commands** â€“ Managing service, logs, backups, and security.  
âœ… **Dashboards & Alerts** â€“ Prometheus, MySQL, Slack, Email notifications.  
âœ… **Security Best Practices** â€“ HTTPS, authentication, access control.  

Would you like help integrating **Grafana with Kubernetes (K8s) or Jenkins?** ğŸš€